name: Notifications
on:
  check_run:
    types: [completed]
jobs:
  notifications:
    runs-on: ubuntu-latest
    steps:
      - name: Send email when GitHub Check Suites failed
        uses: docker://cirrusactions/email:latest
        env:
          APP_NAME: "FlowBinding"
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          MAIL_FROM: ${{ secrets.MAIL_FROM }}
          MAIL_HOST: ${{ secrets.MAIL_HOST }}
          MAIL_USERNAME: ${{ secrets.MAIL_USERNAME }}
          MAIL_PASSWORD: ${{ secrets.MAIL_PASSWORD }}


#name: Instrumented test workflow
#
#on:
#  pull_request:
#    branches:
#      - master
#  push:
#    branches:
#      - master
#
#jobs:
#  instrumented-tests:
#    name: Run tests
#    runs-on: macOS-latest
#    strategy:
#      matrix:
#        api-level: [21, 23]
#    steps:
#      - uses: actions/checkout@v1
#        with:
#          fetch-depth: 1
#      - uses: reactivecircus/android-emulator-runner@v1
#        with:
#          api-level: ${{ matrix.api-level }}
#          profile: Nexus 6
#          script: ./gradlew connectedCheck
#        env:
#          CI: true
#          JAVA_TOOL_OPTIONS: -Xmx3g
#          GRADLE_OPTS: -Dorg.gradle.daemon=false -Dorg.gradle.workers.max=2 -Dkotlin.incremental=false -Dkotlin.compiler.execution.strategy=in-process
